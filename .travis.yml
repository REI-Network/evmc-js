dist: xenial
language: node_js
node_js:
- node
- '11'
sudo: false
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-7
    - gcc-7
cache:
  directories:
  - "$HOME/.npm"
  - "$HOME/.hunter"
script: npm run test
before_install: export CC=gcc-7; export CXX=g++-7
before_deploy:
- npm pack
deploy:
- provider: releases
  api_key: "$GITHUB_TOKEN"
  file_glob: true
  file: evmc-*.tgz
  skip_cleanup: true
  on:
    branch: master
    node: '11'
    tags: true
- provider: npm
  api_key: "$NPM_TOKEN"
  skip_cleanup: true
  email: mwei@cs.ucsd.edu
  on:
    branch: master
    node: '11'
    tags: true
- provider: pages
  skip-cleanup: true
  github-token: "$GITHUB_TOKEN"
  keep-history: true
  local_dir: docs
  committer-from-gh: true
  on:
    branch: master
    node: '11'
env:
  global:
  - secure: btgDEF+GqwPufFP1LoExfz0nqQnwBHpY8f2wAaH9yahi0RiORIv7hdhXJ9230iibgjxgeacxFEynNb4TFVT4Wb9iK3cv8dMTnpCAiT9JExy5uusY1f/17GFLiNy8PtqRxAeZHZXj6ZHSSy6qml8IY9nfZ98H1QZWiCU5rIlA6594lKzqQop/CNFapERR9LJnJU0mnN4gfbPJADMUo9V0ywuJSq1Tq7WO2gimQzqEgpbj8kykFLRIk/w9EqtHJM9pmY43GgGqhAiNjaO7d0tu+RtOx8AfIEP+iiry0/WMPPp8q2MsGWYhE5EpB4a5YXd/vOU1YMQhmbvQW0fXcHQVof2mU/Z/ipsE/0NGrDZ/MRe7DlFIGPX6WUKkxSLmoSFBB8oCNcS9A6Ch1s8tSZVmPfEnSBdd2ScrasdY+DIZvHyV6TzkOq11jQQsQlB+qjkmJbWBtacqY+EUf5Ziv0fiWsdPJ0bgrKd8TGm0i97mln/relEvfjlHcDDXxrc5n3AKgvYbnJ2xyC/rgSekKbVDJvhVMH0EjtFceyE1WS3bfcjjAjVg1HLd0IM58v3wJhnmwGwSHouVzhvmmJKH5UxTN4BHpZewK3zHNqlYz8FUV3Lb9+xGE1hXnbHMxCFAplVp8Yn8O/U1lHnI0SiDYaeZC0pk0jTlc7M6Z4VWSlNAPa8=
  - secure: C5OOz/qsI0FbVgRp3fGBH5saLFMgb1HN9Mjh1Yf3jlrL1HeOstttaS41UMVfdA9P+acp0zYqwCBt737tnbQP6nCxHGIm+mn2n+n/6qNDsVkKaVk96iA0lirabmoSx5Mbx0E0qRCJ+NrfbGDuSoiVfFiOoWqKodXomO66ysJPnRE3C9quyPBG+mYdUzjra4Kum3v5cuqqIAp8+EfH62h9dwd3qLwna7/eDWk8e3H4F6J55TLW2dtGRT6IxDRZ+TH/9dKFX+P0pl3PxINzHMRTlvQTERvlLEiwLcvWDAxuk2gloQBbcIiW3AsUtbdTpT/MK47VF3o/n3Ut5uXJiwutZY9OLTPq7MZSYzvMM0MNw1Dm7Ak6fg6TetPx9uxy4rPka1zsI9tGgsUk9IirPYwTePpLFOylXPiLHPPackPKp/sBqwRnWiVPBSr9wkqcrJcZiyGkxeJj4FjnJaYACTYhqUuAl1mm+lPm5E+q2HxnUFN2r+VXM9BX0lQlib+x7xDPbfWOSlLzBIxnaW9Wx/uGtcB+rlwSw1oFusG1JFtpb86y2NGjs/AaKKFQqfgl87alOCIC/yaXf0DBgUlSLloWVCm+nDF1mvRLJbzO1b3tsQzJ/CyRU/mdC7VWByy5UBsN4sBxXEprvSunV8vPsVGLb20P4Jgo/7UzggW5UxAKHaE=
